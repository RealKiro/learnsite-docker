<?xml version="1.0" encoding="UTF-8"?>
<configuration>
  <appSettings>
    <add key="Homework" value="~/homework/" />
  </appSettings>
  <connectionStrings>
    <!-- 
      设置remove清除根目录继承下来的connectionString设置
      防止虚拟目录中的网站读取根目录下的数据库连接字符串
      也可以直接用clear方法（备忘）
     -->
    <remove name="SqlServer" />
    <!-- 请将下面 <add name=……/> 中的"127.0.0.1"更改为你的数据库服务器名称或IP地址，Catalog中的"learnsite"更改为你创建的数据库名称，pwd中的"Zhou!12345"更改为你自己的数据库密码（注意需要大写+小写+数字组合）：-->
    <add name="SqlServer" providerName="System.Data.SqlClient" 
     connectionString="Data Source=${DB_HOST};Initial Catalog=${DB_NAME};uid=${DB_USER};pwd=${DB_PASSWORD};" />
  </connectionStrings>
  <system.web>
    <!-- 修正：Windows 身份验证在 Linux/Mono 下不可用，改为 Forms 模式（或可注释此行） -->
    <authentication mode="Forms">
      <forms name=".LearnSite" loginUrl="~/index.aspx" timeout="720" protection="All" />
    </authentication>
    <!-- 如需全局登录检查，可取消下一段注释
    <authorization>
      <deny users="?" />
    </authorization>
    -->
    <sessionState mode="InProc" timeout="720" />
    <httpRuntime maxRequestLength="2048000" executionTimeout="300" enableVersionHeader="false" />
    <machineKey validation="3DES" />
    <compilation debug="true" defaultLanguage="c#">
      <assemblies>
        <add assembly="System.Management, Version=2.0.0.0, Culture=neutral, PublicKeyToken=B03F5F7F11D50A3A" />
      </assemblies>
    </compilation>
    <!--出错远程信息显示配置<customErrors mode="Off"/>-->
    <customErrors mode="Off" />
    <!-- 强制整个应用使用 UTF-8 编码 -->
    <globalization
        fileEncoding="utf-8"
        requestEncoding="utf-8"
        responseEncoding="utf-8"
        culture="auto"
        uiCulture="auto" />
  </system.web>
    <system.webServer>
        <staticContent>
          <!--避免有些IIS自己配置的MIME冲突-->
          <remove fileExtension=".z1" />
          <remove fileExtension=".sb3" />
          <remove fileExtension=".sb2" />
          <remove fileExtension=".sb" />
          <remove fileExtension=".po" />
          <remove fileExtension=".mm" />
	        <remove fileExtension=".km" />

          <mimeMap fileExtension=".sb3" mimeType="application/octet-stream" />
          <mimeMap fileExtension=".sb2" mimeType="application/octet-stream" />
          <mimeMap fileExtension=".sb" mimeType="application/octet-stream" />
          <mimeMap fileExtension=".z1" mimeType="application/octet-stream" />
          <mimeMap fileExtension=".po" mimeType="text/plain" />
          <mimeMap fileExtension=".mm" mimeType="application/x-freemind" />
	        <mimeMap fileExtension=".km" mimeType="application/octet-stream" />

        </staticContent>
      <security>
        <requestFiltering>
          <!--上传文件大小限制，单位：字节。 -->
          <requestLimits maxQueryString="102400" maxAllowedContentLength="1073741824" />
          <!-- 1 GB -->
        </requestFiltering>
      </security>
        <httpErrors errorMode="Detailed" />
        <defaultDocument>
            <files>
                <clear />
                <add value="index.aspx" />
            </files>
        </defaultDocument>
    </system.webServer>
</configuration>



